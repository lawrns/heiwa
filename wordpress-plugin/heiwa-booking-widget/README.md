# Heiwa Booking Widget - WordPress Plugin

A lightweight WordPress booking widget that integrates with the Heiwa House booking system. Displays a collapsible booking interface for surf camps and accommodations.

## Architecture

This plugin uses a modular CSS architecture for better maintainability and performance:

### CSS Structure
- **`base.css`** - Foundation layer with CSS custom properties, reset, typography, and color palette
- **`components.css`** - Component layer with buttons, cards, forms, and interactive elements
- **`layout.css`** - Layout layer with modal positioning, grid systems, and responsive containers
- **`utilities.css`** - Utilities layer with final overrides, theme compatibility, and animations
- **`widget.css`** - Combined production file (generated by build script)

### Loading Order
The CSS files are loaded in this order to ensure proper cascade:
```
base.css → components.css → layout.css → utilities.css
```

## Development

### Building Production CSS
To generate a single `widget.css` file for production deployment:

```bash
# From the wordpress-plugin/heiwa-booking-widget directory
./build-css.sh
```

This will:
- Combine all modular CSS files into a single `widget.css`
- Add section headers for clarity
- Provide build statistics
- Optionally create a minified version

### File Structure
```
wordpress-plugin/heiwa-booking-widget/
├── assets/
│   ├── css/
│   │   ├── base.css          # Foundation styles
│   │   ├── components.css    # UI components
│   │   ├── layout.css        # Layout & positioning
│   │   ├── utilities.css     # Overrides & animations
│   │   ├── widget.css        # Production build (generated)
│   │   └── admin.css         # Admin interface styles
│   └── js/
│       ├── widget.js         # Frontend functionality
│       └── admin.js          # Admin interface JS
├── includes/
│   ├── class-api-connector.php
│   ├── class-shortcode.php   # Updated to use modular CSS
│   └── class-widget.php
├── admin/
│   └── class-settings.php
├── docs/
│   └── styling-architecture.json  # Updated documentation
├── heiwa-booking-widget.php       # Main plugin file
├── build-css.sh                   # Build script
└── README.md                      # This file
```

## Installation

1. Upload the `heiwa-booking-widget` folder to `/wp-content/plugins/`
2. Activate the plugin through the WordPress admin
3. Configure API settings in the plugin settings page
4. Use the shortcode `[heiwa_booking]` or the widget in your theme

## Configuration

### Required Settings
- **API Endpoint**: Your Heiwa House API endpoint
- **API Key**: Your authentication key
- **Widget Position**: Choose between 'left', 'right', or 'center'
- **Primary Color**: Brand color (defaults to Heiwa orange)

### Optional Settings
- **Trigger Text**: Custom text for the booking button
- **Auto Inject**: Automatically add widget to all pages
- **Enabled Pages**: Specify which pages should show the widget

## Customization

### CSS Customization
Override styles by targeting these classes:
- `.heiwa-booking-widget` - Main widget container
- `.heiwa-booking-panel` - Modal panel
- `.heiwa-booking-overlay` - Backdrop overlay
- `.heiwa-destination-card` - Destination selection cards
- `.heiwa-booking-form` - Booking form elements

### JavaScript Events
The widget triggers these custom events:
- `heiwa_widget_opened` - When modal opens
- `heiwa_widget_closed` - When modal closes
- `heiwa_booking_submitted` - When booking form is submitted

## WordPress Compatibility

### Theme Compatibility
The widget is designed to work with popular WordPress themes:
- Twenty Twenty-Three
- Astra
- GeneratePress
- Divi
- Elementor

### Plugin Conflicts
Tested with common plugins:
- Contact Form 7
- WooCommerce
- Yoast SEO
- WP Rocket
- Autoptimize

## Performance

### Optimization Features
- Modular CSS loading for better caching
- CSS custom properties for theme customization
- Optimized JavaScript with minimal DOM manipulation
- Responsive images and lazy loading

### Build Optimization
Use the build script for production:
```bash
./build-css.sh  # Creates optimized single CSS file
```

## Troubleshooting

### Common Issues
1. **Widget not appearing**: Check API settings and console for errors
2. **Styling conflicts**: Use browser dev tools to identify CSS conflicts
3. **JavaScript errors**: Check for jQuery conflicts with other plugins

### Debug Mode
Enable WordPress debug mode to see detailed error logs:
```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
```

## Version History

### v2.0.0 (Current)
- Migrated to modular CSS architecture
- Improved performance and maintainability
- Enhanced theme compatibility
- Added build system for production deployment

### v1.0.8
- Initial release with single CSS file architecture
- Basic WordPress integration
- Core booking functionality

## Support

For support and documentation:
- Check the `/docs/styling-architecture.json` for detailed styling documentation
- Use the build script for production deployment
- Test with WordPress debug mode enabled

## License

GPL v2 or later
